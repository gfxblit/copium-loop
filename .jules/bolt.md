## 2026-02-04 - [SessionManager File Scanning Optimization]
**Learning:** `pathlib.Path.rglob` combined with `sort(key=lambda f: f.stat().st_mtime)` is significantly slower than `os.scandir` + `heapq.nlargest` for finding the most recent files in a large directory tree. `rglob` creates `Path` objects for every file, and `f.stat()` invokes a system call for every file. `os.scandir` yields `DirEntry` objects with cached stat info (on most platforms), avoiding extra syscalls.
**Action:** When needing only the top K items based on file attributes from a large set of files, use `os.scandir` recursively to yield `(attribute, path)` tuples and feed them into `heapq.nlargest`. This avoids creating unnecessary `Path` objects and sorting the entire list (O(N log K) vs O(N log N)). In this case, it reduced scan time by ~55% for 20,000 files.
